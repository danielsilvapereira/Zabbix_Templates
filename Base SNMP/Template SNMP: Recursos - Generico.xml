<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>5.0</version><date>2022-05-27T13:09:49Z</date><groups><group><name>Templates/Base SNMP</name></group></groups><templates><template><template>Template SNMP Recursos - Generico</template><name>Template SNMP: Recursos - Generico</name><groups><group><name>Templates/Base SNMP</name></group></groups><applications><application><name>CPU</name></application><application><name>Memória</name></application><application><name>Storage</name></application></applications><items><item><name>CPU Utilização (%)</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#CPU.UTIL},1.3.6.1.2.1.25.3.3.1.2]</snmp_oid><key>system.cpu.util</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><applications><application><name>CPU</name></application></applications><preprocessing><step><type>JSONPATH</type><params>$..[{#CPU.UTIL}].avg()</params></step></preprocessing><triggers><trigger><expression>{min(5m)}&gt;{$CPU.UTIL.WARN}</expression><name>Alta utilização de CPU (&gt;{$CPU.UTIL.WARN}%}</name><opdata>Utilização atual: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>Recursos</tag><value>CPU</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><name>Discovery Memoria</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#MEM_NAME},1.3.6.1.2.1.25.2.3.1.3,{#MEM_TYPE},1.3.6.1.2.1.25.2.3.1.2,{#ALLOC_UNITS},1.3.6.1.2.1.25.2.3.1.4]</snmp_oid><key>discovery.memoria</key><delay>6h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#MEMTYPE}</macro><value>{$MEMORY.TYPE.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#MEMTYPE}</macro><value>{$MEMORY.TYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>D</formulaid></condition><condition><macro>{#MEMNAME}</macro><value>{$MEMORY.NAME.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#MEMNAME}</macro><value>{$MEMORY.NAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><lifetime>0d</lifetime><item_prototypes><item_prototype><name>{#MEMNAME}: Total memory</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.2.3.1.5.{#SNMPINDEX}</snmp_oid><key>vm.memory.total[hrStorageSize.{#SNMPINDEX}]</key><history>7d</history><units>B</units><description>MIB: HOST-RESOURCES-MIB&#13;
The size of the storage represented by this entry, in units of hrStorageAllocationUnits.&#13;
This object is writable to allow remote configuration of the size of the storage area in those cases where such an operation makes sense and is possible on the underlying system.&#13;
For example, the amount of main memory allocated to a buffer pool might be modified or the amount of disk space allocated to virtual memory might be modified.</description><applications><application><name>Memória</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>{#ALLOC_UNITS}</params></step></preprocessing></item_prototype><item_prototype><name>{#MEMNAME}: Used memory</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}</snmp_oid><key>vm.memory.used[hrStorageUsed.{#SNMPINDEX}]</key><history>7d</history><units>B</units><description>MIB: HOST-RESOURCES-MIB&#13;
The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.</description><applications><application><name>Memória</name></application></applications><preprocessing><step><type>MULTIPLIER</type><params>{#ALLOC_UNITS}</params></step></preprocessing></item_prototype><item_prototype><name>{#MEMNAME}: Memory utilization</name><type>CALCULATED</type><key>vm.memory.util[memoryUsedPercentage.{#SNMPINDEX}]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><params>last(&quot;vm.memory.used[hrStorageUsed.{#SNMPINDEX}]&quot;)/last(&quot;vm.memory.total[hrStorageSize.{#SNMPINDEX}]&quot;)*100</params><description>Memory utilization in %</description><applications><application><name>Memória</name></application></applications><trigger_prototypes><trigger_prototype><expression>{min(5m)}&gt;{$MEMORY.UTIL.MAX}</expression><name>{#MEMNAME}: High memory utilization (&gt;{$MEMORY.UTIL.MAX}% for 5m)</name><priority>AVERAGE</priority><description>The system is running out of free memory.</description></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><name>{#MEMNAME}: Memory utilization</name><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Template SNMP Recursos - Generico</host><key>vm.memory.util[memoryUsedPercentage.{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule><discovery_rule><name>Discovery Storage</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#FSNAME},1.3.6.1.2.1.25.2.3.1.3,{#FSTYPE},1.3.6.1.2.1.25.2.3.1.2,{#ALLOC_UNITS},1.3.6.1.2.1.25.2.3.1.4]</snmp_oid><key>vfs.fs.discovery[snmp]</key><delay>1h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>D</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><item_prototypes><item_prototype><name>{#FSNAME}: Space utilization</name><type>CALCULATED</type><key>vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><params>(last(&quot;vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]&quot;)/last(&quot;vfs.fs.total[hrStorageSize.{#SNMPINDEX}]&quot;))*100</params><description>Space utilization in % for {#FSNAME}</description><application_prototypes><application_prototype><name>Filesystem {#FSNAME}</name></application_prototype></application_prototypes></item_prototype><item_prototype><name>{#FSNAME}: Total space</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.2.3.1.5.{#SNMPINDEX}</snmp_oid><key>vfs.fs.total[hrStorageSize.{#SNMPINDEX}]</key><history>7d</history><units>B</units><description>MIB: HOST-RESOURCES-MIB&#13;
The size of the storage represented by this entry, in units of hrStorageAllocationUnits.&#13;
This object is writable to allow remote configuration of the size of the storage area in those cases where such an operation makes sense and is possible on the underlying system.&#13;
For example, the amount of main storage allocated to a buffer pool might be modified or the amount of disk space allocated to virtual storage might be modified.</description><application_prototypes><application_prototype><name>Filesystem {#FSNAME}</name></application_prototype></application_prototypes><preprocessing><step><type>MULTIPLIER</type><params>{#ALLOC_UNITS}</params></step></preprocessing></item_prototype><item_prototype><name>{#FSNAME}: Used space</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}</snmp_oid><key>vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]</key><history>7d</history><units>B</units><description>MIB: HOST-RESOURCES-MIB&#13;
The amount of the storage represented by this entry that is allocated, in units of hrStorageAllocationUnits.</description><application_prototypes><application_prototype><name>Filesystem {#FSNAME}</name></application_prototype></application_prototypes><preprocessing><step><type>MULTIPLIER</type><params>{#ALLOC_UNITS}</params></step></preprocessing></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><expression>{Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].last()}&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and&#13;
(({Template SNMP Recursos - Generico:vfs.fs.total[hrStorageSize.{#SNMPINDEX}].last()}-{Template SNMP Recursos - Generico:vfs.fs.used[hrStorageUsed.{#SNMPINDEX}].last()})&lt;5G or {Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].timeleft(1h,,100)}&lt;1d)</expression><name>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>AVERAGE</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}.&#13;
 Second condition should be one of the following:&#13;
 - The disk free space is less than 5G.&#13;
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close></trigger_prototype><trigger_prototype><expression>{Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].last()}&gt;{$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;} and&#13;
(({Template SNMP Recursos - Generico:vfs.fs.total[hrStorageSize.{#SNMPINDEX}].last()}-{Template SNMP Recursos - Generico:vfs.fs.used[hrStorageUsed.{#SNMPINDEX}].last()})&lt;10G or {Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].timeleft(1h,,100)}&lt;1d)</expression><name>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}%)</name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>WARNING</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}.&#13;
 Second condition should be one of the following:&#13;
 - The disk free space is less than 10G.&#13;
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close><dependencies><dependency><name>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</name><expression>{Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].last()}&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and&#13;
(({Template SNMP Recursos - Generico:vfs.fs.total[hrStorageSize.{#SNMPINDEX}].last()}-{Template SNMP Recursos - Generico:vfs.fs.used[hrStorageUsed.{#SNMPINDEX}].last()})&lt;5G or {Template SNMP Recursos - Generico:vfs.fs.pused[storageUsedPercentage.{#SNMPINDEX}].timeleft(1h,,100)}&lt;1d)</expression></dependency></dependencies></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><name>{#FSNAME}: Disk space usage</name><width>600</width><height>340</height><type>PIE</type><show_3d>YES</show_3d><graph_items><graph_item><color>969696</color><calc_fnc>LAST</calc_fnc><type>GRAPH_SUM</type><item><host>Template SNMP Recursos - Generico</host><key>vfs.fs.total[hrStorageSize.{#SNMPINDEX}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><calc_fnc>LAST</calc_fnc><item><host>Template SNMP Recursos - Generico</host><key>vfs.fs.used[hrStorageUsed.{#SNMPINDEX}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$CPU.UTIL.WARN}</macro><value>85</value><description>Trigger utilização de CPU</description></macro></macros></template></templates></zabbix_export>

